---
title: "SRP"
output: pdf_document
date: "2025-09-03"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
use_condaenv("pvlib-env", required = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{python}
import pvlib
import matplotlib.pyplot as plt
import pandas as pd

from pvlib.modelchain import ModelChain
# help(ModelChain)
# help(ModelChain.run_model)
# help(pvlib.pvsystem.retrieve_sam)
from pvlib.location import Location
from pvlib.pvsystem import PVSystem
from pvlib.temperature import TEMPERATURE_MODEL_PARAMETERS
# temperature model parameters introduces derates. 

# modelchain = Modelchain(system, location)
location = Location(latitude=33.43, longitude=-112, tz='America/Phoenix', altitude= 335, name='Phoenix Airport')

sandia_modules = pvlib.pvsystem.retrieve_sam('SandiaMod')
cec_inverters = pvlib.pvsystem.retrieve_sam('CECInverter')

module = sandia_modules['Canadian_Solar_CS5P_220M___2009_']
inverter = cec_inverters['ABB__MICRO_0_25_I_OUTD_US_208__208V_']

temperature_parameters = TEMPERATURE_MODEL_PARAMETERS['sapm']['open_rack_glass_glass']

system = PVSystem(surface_tilt=45, surface_azimuth=180, module_parameters=module, inverter_parameters=inverter, temperature_model_parameters=temperature_parameters)

modelchain = ModelChain(system, location)

times = pd.date_range(start='2024-07-01', end= '2024-07-04', freq='1min', tz=location.tz)

clear_sky = location.get_clearsky(times)

modelchain.run_model(clear_sky)
modelchain.results.ac.plot(figsize=(16,9))
plt.show()
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
